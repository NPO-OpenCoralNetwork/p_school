# ブロックバトルゲーム - ステージ構成資料

## 概要

このゲームは、ブロックプログラミングを通じてプログラミングの基礎を学びながら、敵とのバトルを楽しむ学習ゲームです。レベルは初級・中級・上級の3段階に分かれており、各レベルに20ステージずつ、合計60ステージが用意されています。

## ゲームの基本ルール

1. 各ステージには特定の敵が存在し、プログラミングで敵を倒すことが目標です
2. 使用できるブロックは徐々に増えていきます
3. 少ないブロック数でプログラムを組むと、より多くの経験値を獲得できます
4. 作成した便利な処理は「関数」として保存でき、後のステージでも再利用できます
5. ステージごとに様々な課題（魔法の詠唱、薬の調合、武器の習得など）が存在します

## レベル構成

### 初級レベル（レベル1～20）
プログラミングの基礎概念を学びます。シンプルな命令の連続実行から始まり、徐々に複雑な概念を導入します。

### 中級レベル（レベル21～40）
初級で学んだ概念をより深く活用し、変数や繰り返し処理を積極的に使った複雑なプログラミングを学びます。

### 上級レベル（レベル41～60）
関数、再帰、複雑な条件分岐など、高度なプログラミング概念を駆使して課題を解決します。

---

## 初級ステージ（レベル1～20）

### ステージ1: はじめての戦い
**敵**: スライム（HP: 10）
**使用可能ブロック**: 攻撃
**目標**: 攻撃ブロックを使ってスライムを倒す
**学習内容**: 基本的なブロックの使い方、プログラムの実行方法

### ステージ2: 回復の魔法
**敵**: ポイズンモス（HP: 15、毒攻撃あり）
**使用可能ブロック**: 攻撃、回復
**目標**: 敵の毒攻撃で減ったHPを回復しながら戦う
**学習内容**: 複数のコマンドの連続実行

### ステージ3: 魔法の詠唱
**敵**: ファイアゴブリン（HP: 20、炎に弱い）
**使用可能ブロック**: 攻撃、回復、魔法詠唱（炎）
**目標**: 炎の魔法を詠唱して敵のウィークポイントを突く
**学習内容**: 魔法詠唱パターンの理解（右手→右手→左手）

### ステージ4: 氷の壁
**敵**: フレイムウルフ（HP: 25、氷に弱い）
**使用可能ブロック**: 攻撃、回復、魔法詠唱（炎、氷）
**目標**: 氷の魔法を使って敵を倒す
**学習内容**: 別の魔法詠唱パターンの習得（左手）

### ステージ5: 時間との勝負
**敵**: タイムイーター（HP: 30、一定時間後に強化）
**使用可能ブロック**: 攻撃、回復、魔法詠唱（炎、氷）、待機
**目標**: 敵が強化される前に集中攻撃で倒す
**学習内容**: タイミング制御、待機ブロックの活用

### ステージ6: 薬の調合
**敵**: ポイズンコング（HP: 35、強力な毒を使用）
**使用可能ブロック**: 攻撃、回復、魔法詠唱（炎、氷）、待機、解毒薬調合
**目標**: 解毒薬を調合して毒状態を解除しながら戦う
**学習内容**: ブロックの組み合わせによる新機能の作成

### ステージ7: 雷の力
**敵**: メタルスライム（HP: 20、高防御力、雷に弱い）
**使用可能ブロック**: 攻撃、回復、魔法詠唱（炎、氷、雷）
**目標**: 雷の魔法で硬い防御を突破する
**学習内容**: 複雑な魔法詠唱パターン（右手→左手→右手→左手）

### ステージ8: 行動の繰り返し
**敵**: ゴブリン部隊（HP: 各10、5体）
**使用可能ブロック**: 攻撃、回復、魔法詠唱、待機、繰り返し（2回）
**目標**: 繰り返しブロックを使って効率的に敵を倒す
**学習内容**: 簡単な繰り返し処理の概念

### ステージ9: 連続魔法攻撃
**敵**: シャドウバット（HP: 40、素早い）
**使用可能ブロック**: すべての基本ブロック、繰り返し（3回）
**目標**: 同じ魔法を連続で使って素早い敵を倒す
**学習内容**: 繰り返しブロックの効果的な使用

### ステージ10: 初級ボス戦
**敵**: ダークナイト（HP: 100、フェーズ変化あり）
**使用可能ブロック**: すべての基本ブロック、繰り返し（3回）
**目標**: ボスの弱点を見つけて攻略する
**学習内容**: これまでの学習内容の総合的な応用

### ステージ11: 初めての変数
**敵**: ミラージュウィザード（HP: 50、幻影を生成）
**使用可能ブロック**: 基本ブロック、繰り返し、変数（カウンター）
**目標**: 変数を使って敵の幻影の数を数え、本体を特定する
**学習内容**: 変数の基本概念

### ステージ12: HP管理
**敵**: ビーストマスター（HP: 60、ペットを召喚）
**使用可能ブロック**: 基本ブロック、繰り返し、変数（HP監視）
**目標**: 自分のHPが一定値を下回ったら回復する戦略を組む
**学習内容**: 変数を使った条件判断

### ステージ13: 攻撃パターン分析
**敵**: パターンゴーレム（HP: 70、予測可能なパターンで攻撃）
**使用可能ブロック**: 基本ブロック、繰り返し、変数、カウンター
**目標**: 敵の攻撃パターンを分析して効率的に反撃する
**学習内容**: パターン認識、カウンターの概念

### ステージ14: 初めての条件分岐
**敵**: フォレストガーディアン（HP: 80）
**使用可能ブロック**: 基本ブロック、繰り返し、変数、もし～なら
**目標**: 敵の状態に応じて攻撃方法を変える
**学習内容**: 条件分岐の基本

### ステージ15: 属性の有効活用
**敵**: エレメンタルシフター（HP: 70、属性が変化する）
**使用可能ブロック**: 基本ブロック、繰り返し、変数、もし～なら
**目標**: 敵の属性に合わせて効果的な魔法を使う
**学習内容**: 条件分岐を使った戦略

### ステージ16: カウンターアタック
**敵**: ミラーナイト（HP: 90、攻撃を跳ね返す）
**使用可能ブロック**: 基本ブロック、繰り返し、変数、条件分岐
**目標**: 敵がカウンター状態の時は攻撃を避け、隙を見て攻撃する
**学習内容**: 複数の条件を考慮したプログラミング

### ステージ17: 初めての関数
**敵**: スケルトンアーミー（HP: 各15、多数）
**使用可能ブロック**: 基本ブロック、繰り返し、変数、条件分岐、関数定義
**目標**: 「攻撃して回復する」という一連の動作を関数として定義して活用
**学習内容**: 関数の基本概念

### ステージ18: 薬の合成レシピ
**敵**: プレーグドクター（HP: 100、様々な状態異常を引き起こす）
**使用可能ブロック**: すべてのブロック
**目標**: 様々な状態異常に対応する薬を関数として定義して合成
**学習内容**: 関数の活用、パラメータの考え方

### ステージ19: 武器の強化
**敵**: アームズマスター（HP: 120、様々な武器を使用）
**使用可能ブロック**: すべてのブロック
**目標**: 武器強化の手順を関数化し、最適な武器で戦う
**学習内容**: 関数の再利用

### ステージ20: 初級最終ボス
**敵**: コードイーター（HP: 200、プログラムの一部を無効化する）
**使用可能ブロック**: すべてのブロック
**目標**: 無効化される可能性のあるブロックに依存しないプログラムを作成
**学習内容**: 堅牢なプログラムの設計、初級で学んだすべての概念の総合

---

## 中級ステージ（レベル21～40）

### ステージ21: 変数の応用
**敵**: カオスジェスター（HP: 150、ランダムな行動をとる）
**使用可能ブロック**: すべてのブロック
**目標**: 変数を使って敵の行動パターンを記録し対応する
**学習内容**: 複数の変数の活用

### ステージ22: 環境の変化
**敵**: エレメンタルロード（HP: 160、フィールドの属性を変える）
**使用可能ブロック**: すべてのブロック
**目標**: 変化するフィールド属性を変数で記録し、最適な行動をとる
**学習内容**: グローバル変数の概念

### ステージ23: 複数の敵
**敵**: トリプルスライム（HP: 各60、3体、連携攻撃あり）
**使用可能ブロック**: すべてのブロック
**目標**: 複数の敵の状態を変数で管理しながら戦う
**学習内容**: 複数オブジェクトの状態管理

### ステージ24: 高度な繰り返し
**敵**: エコーバット（HP: 100、こちらの攻撃を真似る）
**使用可能ブロック**: すべてのブロック、繰り返し（回数指定）
**目標**: 変数を使った動的な繰り返し回数の設定
**学習内容**: 変数を使った繰り返し制御

### ステージ25: 無限ループの危険
**敵**: タイムワープウィザード（HP: 120、時間を戻す能力あり）
**使用可能ブロック**: すべてのブロック、条件付き繰り返し
**目標**: 条件が整うまで繰り返す処理を作成する
**学習内容**: while相当の条件付きループ

### ステージ26: ループの中断
**敵**: スピードデーモン（HP: 140、行動パターンが途中で変化）
**使用可能ブロック**: すべてのブロック、ループ脱出
**目標**: 特定の条件でループを抜ける処理を作成
**学習内容**: break相当の制御構造

### ステージ27: 複合条件
**敵**: ロジックゴーレム（HP: 150、複数の条件で弱点が変わる）
**使用可能ブロック**: すべてのブロック、複合条件（AND、OR）
**目標**: 複数の条件を組み合わせた分岐処理を作成
**学習内容**: 論理演算子

### ステージ28: 否定条件
**敵**: リバースナイト（HP: 160、通常と逆の弱点を持つ）
**使用可能ブロック**: すべてのブロック、否定条件（NOT）
**目標**: 否定条件を使った分岐処理を作成
**学習内容**: 論理否定

### ステージ29: 条件の入れ子
**敵**: ネストドラゴン（HP: 180、複数の条件が重なる弱点あり）
**使用可能ブロック**: すべてのブロック、条件の入れ子
**目標**: 条件分岐の中にさらに条件分岐を入れたプログラムを作成
**学習内容**: 入れ子構造の条件分岐

### ステージ30: 中級ボス戦
**敵**: アルゴリズムロード（HP: 250、パターン分析能力あり）
**使用可能ブロック**: すべてのブロック
**目標**: 予測されにくい攻撃パターンを組み立てる
**学習内容**: 中級前半の総合的な応用

### ステージ31: 関数とパラメータ
**敵**: シェイプシフター（HP: 200、形態変化あり）
**使用可能ブロック**: すべてのブロック、パラメータ付き関数
**目標**: パラメータを受け取る関数を作成して形態に応じた攻撃を行う
**学習内容**: 関数パラメータの基本

### ステージ32: 関数の戻り値
**敵**: データマイナー（HP: 220、隠されたデータを持つ）
**使用可能ブロック**: すべてのブロック、戻り値のある関数
**目標**: 値を返す関数を作成し、敵の隠しデータを分析する
**学習内容**: 関数の戻り値

### ステージ33: 魔法の組み合わせ
**敵**: エレメンタルフュージョン（HP: 230、元素を組み合わせた攻撃を使用）
**使用可能ブロック**: すべてのブロック
**目標**: 複数の魔法を組み合わせる関数を作成
**学習内容**: 複雑な関数の設計

### ステージ34: 武器強化システム
**敵**: ウェポンマスター（HP: 240、様々な武器に対応）
**使用可能ブロック**: すべてのブロック、装備変更
**目標**: 武器強化と選択のシステムを関数で実装
**学習内容**: オブジェクト操作の基本

### ステージ35: 魔法陣の構築
**敵**: ルーンキーパー（HP: 250、複雑な魔法陣を展開）
**使用可能ブロック**: すべてのブロック
**目標**: 複数のパターンを組み合わせた魔法陣を関数で構築
**学習内容**: 複雑な処理の関数化

### ステージ36: 再帰の基本
**敵**: フラクタルウィザード（HP: 260、自己複製する）
**使用可能ブロック**: すべてのブロック、再帰呼び出し
**目標**: 自分自身を呼び出す関数を作成して複製する敵に対処
**学習内容**: 再帰の基本概念

### ステージ37: 高度なアルゴリズム
**敵**: ソートマスター（HP: 270、攻撃を特定の順序で並べ替える）
**使用可能ブロック**: すべてのブロック
**目標**: 並べ替えアルゴリズムを実装して効率的に戦う
**学習内容**: アルゴリズム思考

### ステージ38: パターン認識
**敵**: コードブレーカー（HP: 280、パターンを解読する）
**使用可能ブロック**: すべてのブロック
**目標**: 複雑なパターンを認識して対応する処理を作成
**学習内容**: パターンマッチング

### ステージ39: 攻撃の最適化
**敵**: エフィシエンシーエキスパート（HP: 290、効率の悪い攻撃を無効化）
**使用可能ブロック**: すべてのブロック
**目標**: 最小限のブロックで最大の効果を発揮するプログラムを作成
**学習内容**: コード最適化

### ステージ40: 中級最終ボス
**敵**: バグハンター（HP: 350、プログラムの弱点を突いてくる）
**使用可能ブロック**: すべてのブロック
**目標**: バグの少ない堅牢なプログラムを作成
**学習内容**: デバッグ思考、中級で学んだすべての概念の総合

---

## 上級ステージ（レベル41～60）

### ステージ41: 配列の基本
**敵**: マルチフェイスデーモン（HP: 300、複数の顔を持ち切り替える）
**使用可能ブロック**: すべてのブロック、配列基本操作
**目標**: 配列を使って複数の敵の状態を管理する
**学習内容**: 配列の基本概念

### ステージ42: 配列の操作
**敵**: スワッパー（HP: 320、敵の位置を入れ替える）
**使用可能ブロック**: すべてのブロック、配列操作（追加・削除）
**目標**: 配列要素の追加と削除を使って敵の動きに対応
**学習内容**: 配列の動的操作

### ステージ43: 2次元配列
**敵**: グリッドマスター（HP: 330、グリッド状に展開する敵を操る）
**使用可能ブロック**: すべてのブロック、2次元配列
**目標**: 2次元配列を使ってグリッド上の敵を管理
**学習内容**: 2次元配列の概念

### ステージ44: イベント処理
**敵**: イベントトリガー（HP: 340、特定イベントで強化）
**使用可能ブロック**: すべてのブロック、イベントリスナー
**目標**: イベントに反応するプログラムを作成
**学習内容**: イベント駆動プログラミング

### ステージ45: オブジェクト指向の基本
**敵**: クラスマスター（HP: 350、複数の特性を持つ）
**使用可能ブロック**: すべてのブロック、オブジェクト定義
**目標**: 敵の特性をオブジェクトとして定義して対応
**学習内容**: オブジェクト指向の基本

### ステージ46: 並列処理
**敵**: マルチスレッドデーモン（HP: 360、同時に複数の行動をとる）
**使用可能ブロック**: すべてのブロック、並列実行
**目標**: 複数の処理を同時に行うプログラムを作成
**学習内容**: 並列処理の基本概念

### ステージ47: 非同期処理
**敵**: アシンクロナスハンター（HP: 370、遅延攻撃を使用）
**使用可能ブロック**: すべてのブロック、非同期実行
**目標**: 非同期処理を使って遅延攻撃に対応
**学習内容**: 非同期処理の基本

### ステージ48: エラー処理
**敵**: エラージェネレーター（HP: 380、プログラムにエラーを起こす）
**使用可能ブロック**: すべてのブロック、try-catch相当
**目標**: エラーに強いプログラムを作成
**学習内容**: 例外処理の基本

### ステージ49: アルゴリズムの応用
**敵**: パスファインダー（HP: 390、最短経路で攻撃してくる）
**使用可能ブロック**: すべてのブロック
**目標**: 高度なアルゴリズムを実装して反撃
**学習内容**: グラフアルゴリズムの基本

### ステージ50: 上級ボス戦
**敵**: メタプログラマー（HP: 500、プログラムの構造を解析する）
**使用可能ブロック**: すべてのブロック
**目標**: 予測困難な高度なプログラムを作成
**学習内容**: 上級前半の総合的な応用

### ステージ51: データ構造の応用
**敵**: データストラクチャーマスター（HP: 400、複雑なデータ構造を操る）
**使用可能ブロック**: すべてのブロック、高度なデータ構造
**目標**: スタック、キューなどを実装して戦略を組み立てる
**学習内容**: 高度なデータ構造

### ステージ52: アルゴリズムの最適化
**敵**: オプティマイザー（HP: 420、効率の悪いコードを無力化）
**使用可能ブロック**: すべてのブロック
**目標**: 時間計算量とメモリ使用量を意識したプログラムを作成
**学習内容**: アルゴリズム複雑性

### ステージ53: 機械学習の基礎
**敵**: ラーニングマシン（HP: 440、プレイヤーのパターンを学習）
**使用可能ブロック**: すべてのブロック、学習アルゴリズム
**目標**: シンプルな学習アルゴリズムを実装して適応する
**学習内容**: 基本的な機械学習の概念

### ステージ54: 状態管理
**敵**: ステートコントローラー（HP: 460、複雑な状態遷移を持つ）
**使用可能ブロック**: すべてのブロック、状態マシン
**目標**: 状態マシンを実装して敵の状態変化に対応
**学習内容**: 有限状態マシン

### ステージ55: 抽象化と設計
**敵**: アーキテクト（HP: 480、構造的な攻撃を行う）
**使用可能ブロック**: すべてのブロック
**目標**: 高度に抽象化されたモジュラープログラムを作成
**学習内容**: プログラム設計とアーキテクチャ

### ステージ56: メタプログラミング
**敵**: コードジェネレーター（HP: 500、コードそのものを変更する）
**使用可能ブロック**: すべてのブロック、メタプログラミングブロック
**目標**: プログラムが自分自身を修正するコードを書く
**学習内容**: メタプログラミングの概念

### ステージ57: 並行処理の応用
**敵**: コンカレンシーロード（HP: 520、複雑な並行攻撃を行う）
**使用可能ブロック**: すべてのブロック、高度な並行処理
**目標**: 複雑な並行処理を実装して対応
**学習内容**: 並行プログラミングパターン

### ステージ58: セキュアコーディング
**敵**: ハッカーデーモン（HP: 540、プログラムの脆弱性を突く）
**使用可能ブロック**: すべてのブロック、セキュリティブロック
**目標**: セキュリティホールのないプログラムを作成
**学習内容**: セキュアコーディングの基本

### ステージ59: パフォーマンスチューニング
**敵**: ベンチマーカー（HP: 560、実行速度で攻撃力が変わる）
**使用可能ブロック**: すべてのブロック
**目標**: 高速に実行されるプログラムを作成
**学習内容**: パフォーマンス最適化

### ステージ60: 最終ボス
**敵**: コードマスター（HP: 1000、あらゆるプログラミング技術を駆使）
**使用可能ブロック**: すべてのブロック
**目標**: これまで学んだすべてのスキルを駆使して最終ボスを倒す
**学習内容**: 全てのプログラミング概念の総合

---

## 報酬システム

### 経験値計算
- 基本経験値: ステージクリアで獲得（ステージレベルに比例）
- ブロック効率ボーナス: 使用ブロック数が少ないほど高いボーナス
  - 理想的なブロック数の1.5倍以上: ボーナスなし
  - 理想的なブロック数の1.2〜1.5倍: +10% ボーナス
  - 理想的なブロック数の1.0〜1.2倍: +25% ボーナス
  - 理想的なブロック数以下: +50% ボーナス
- 時間ボーナス: 素早くクリアするほど高いボーナス

### 保存可能な関数
- 各ステージでの効率的な解法は「魔法書」として保存可能
- 保存した関数は後のステージで呼び出して使うことができる
- 関数には名前、説明、パラメータを設定可能
- 「魔法書」は他のプレイヤーと共有することも可能（オプション）

## 学習の進行

1. **初級レベル**: 基本的なブロックの使い方、シーケンシャルな処理、簡単な条件分岐と繰り返し、関数の基本を学ぶ
2. **中級レベル**: 変数の応用、複雑な条件分岐、高度なループ、関数の応用、データ構造の基本を学ぶ
3. **上級レベル**: 高度なデータ構造、アルゴリズム、オブジェクト指向プログラミング、非同期処理、メタプログラミングを学ぶ

各レベルを通じて、プログラミングの基本概念から高度な応用まで、楽しみながら段階的に学習することができます。